<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}" data-theme="dark">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- Immediate theme detection to prevent flash -->
    <script>
      (function() {
        const savedTheme = localStorage.getItem('theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const theme = savedTheme || (prefersDark ? 'dark' : 'dark'); // Default to dark
        document.documentElement.setAttribute('data-theme', theme);
      })();
    </script>
    
    <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
    <link rel="stylesheet" type="text/css" href="{{ '/assets/css/print.css' | relative_url }}" media="print">
    <link rel="icon" href="{{ '/assets/favicon.ico' | relative_url }}" type="image/x-icon">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    {% seo %}
    {% include head-custom.html %}
  </head>

  <body>
    <!-- Theme Toggle Button -->
    <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode">
      <span id="theme-icon">ðŸŒ™</span>
    </button>

    <div id="container">
      <div class="inner">
        
        <!-- Navigation Header -->
        <header>
            <div class="brand-title">
              <h1>{{ page.title | default: site.title }}</h1>
              <p>{{ page.description | default: site.description }}</p>
            </div>
          
            <nav class="navbar">
              <button class="hamburger" id="hamburger" aria-label="Toggle navigation menu">
                <span></span>
                <span></span>
                <span></span>
              </button>
              <ul class="navbar-links" id="navbar-links">
                <a href="{{ '/' | relative_url }}">Home</a>
                <a href="{{ '/projects/' | relative_url }}">Projects</a>
                <a href="{{ '/publications/' | relative_url }}">Publications</a>
                <a href="{{ '/assets/resume/Paral,MarkResume.pdf' | relative_url }}">Resume</a>
                <a href="{{ '/about/' | relative_url }}">About</a>
              </ul>
            </nav>
            <div class="mobile-overlay" id="mobile-overlay"></div>
        </header>
        
        <!-- Optional Download Buttons -->
        <section id="downloads" class="clearfix">
          {% if site.show_downloads %}
          <a href="{{ site.github.zip_url }}" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="{{ site.github.tar_url }}" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          {% endif %}
          {% if site.github.public %}
            {% if site.github.is_project_page %}
            <a href="{{ site.github.repository_url }}" id="view-on-github" class="button"><span>View on GitHub</span></a>
            {% else %}
            <a href="{{ site.github.owner_url }}" id="view-on-github" class="button"><span>View on GitHub</span></a>
            {% endif %}
          {% endif %}
        </section>

        <hr>

        <!-- Main Content Section -->
        <section id="main_content">
          {{ content }}
        </section>

        <!-- Footer -->
        <footer>
          Created by <a href="https://github.com/markparal">Mark Paral</a> with <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>
      </div>
    </div>

    <!-- Theme Toggle JavaScript -->
    <script src="{{ '/assets/js/theme.js' | relative_url }}"></script>
  </body>
</html>
